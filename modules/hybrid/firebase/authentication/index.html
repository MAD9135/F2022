<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Firebase Authentication | MAD9135</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="JavaScript App Development">
    
    <link rel="preload" href="/F2022/assets/css/0.styles.69eb72d8.css" as="style"><link rel="preload" href="/F2022/assets/js/app.e8c285b9.js" as="script"><link rel="preload" href="/F2022/assets/js/2.9a13455f.js" as="script"><link rel="preload" href="/F2022/assets/js/3.4ca6bd9c.js" as="script"><link rel="preload" href="/F2022/assets/js/6.351fee7d.js" as="script"><link rel="prefetch" href="/F2022/assets/js/10.19db6b1e.js"><link rel="prefetch" href="/F2022/assets/js/11.9c100ec9.js"><link rel="prefetch" href="/F2022/assets/js/12.66792850.js"><link rel="prefetch" href="/F2022/assets/js/13.570695c0.js"><link rel="prefetch" href="/F2022/assets/js/14.6f8baaa9.js"><link rel="prefetch" href="/F2022/assets/js/15.9fe338ad.js"><link rel="prefetch" href="/F2022/assets/js/16.14a225ab.js"><link rel="prefetch" href="/F2022/assets/js/17.9889dd9b.js"><link rel="prefetch" href="/F2022/assets/js/18.b9f44afa.js"><link rel="prefetch" href="/F2022/assets/js/19.1a5d1eb8.js"><link rel="prefetch" href="/F2022/assets/js/20.bfc9c373.js"><link rel="prefetch" href="/F2022/assets/js/21.b0d5e3b9.js"><link rel="prefetch" href="/F2022/assets/js/22.71501c8b.js"><link rel="prefetch" href="/F2022/assets/js/23.c7ffdeef.js"><link rel="prefetch" href="/F2022/assets/js/24.2d7e7868.js"><link rel="prefetch" href="/F2022/assets/js/25.6973b344.js"><link rel="prefetch" href="/F2022/assets/js/26.5381df9b.js"><link rel="prefetch" href="/F2022/assets/js/27.94beb76f.js"><link rel="prefetch" href="/F2022/assets/js/28.35bb8e11.js"><link rel="prefetch" href="/F2022/assets/js/29.44383e10.js"><link rel="prefetch" href="/F2022/assets/js/30.5979e619.js"><link rel="prefetch" href="/F2022/assets/js/31.fe59b532.js"><link rel="prefetch" href="/F2022/assets/js/32.439d6653.js"><link rel="prefetch" href="/F2022/assets/js/33.f324c148.js"><link rel="prefetch" href="/F2022/assets/js/34.3e1bc0a2.js"><link rel="prefetch" href="/F2022/assets/js/35.db6b2965.js"><link rel="prefetch" href="/F2022/assets/js/36.ab816086.js"><link rel="prefetch" href="/F2022/assets/js/37.07e54435.js"><link rel="prefetch" href="/F2022/assets/js/38.deea1f87.js"><link rel="prefetch" href="/F2022/assets/js/39.72fff846.js"><link rel="prefetch" href="/F2022/assets/js/4.b42af5b4.js"><link rel="prefetch" href="/F2022/assets/js/40.f25af6c1.js"><link rel="prefetch" href="/F2022/assets/js/41.b75d764d.js"><link rel="prefetch" href="/F2022/assets/js/42.e7b3e635.js"><link rel="prefetch" href="/F2022/assets/js/43.ef823a68.js"><link rel="prefetch" href="/F2022/assets/js/44.e65ceadf.js"><link rel="prefetch" href="/F2022/assets/js/45.2653971e.js"><link rel="prefetch" href="/F2022/assets/js/46.2e7a0afa.js"><link rel="prefetch" href="/F2022/assets/js/47.c93b6eb6.js"><link rel="prefetch" href="/F2022/assets/js/48.22a6269b.js"><link rel="prefetch" href="/F2022/assets/js/49.cdbc262a.js"><link rel="prefetch" href="/F2022/assets/js/5.aef0857f.js"><link rel="prefetch" href="/F2022/assets/js/50.411c7402.js"><link rel="prefetch" href="/F2022/assets/js/51.5a18911f.js"><link rel="prefetch" href="/F2022/assets/js/52.ce0eea3f.js"><link rel="prefetch" href="/F2022/assets/js/53.d55f9ed3.js"><link rel="prefetch" href="/F2022/assets/js/54.6a7af4f1.js"><link rel="prefetch" href="/F2022/assets/js/55.8779cc6a.js"><link rel="prefetch" href="/F2022/assets/js/56.281c9c8b.js"><link rel="prefetch" href="/F2022/assets/js/57.e36954dd.js"><link rel="prefetch" href="/F2022/assets/js/58.5c8be1f9.js"><link rel="prefetch" href="/F2022/assets/js/7.0bb8b12a.js"><link rel="prefetch" href="/F2022/assets/js/8.a2a70e3a.js"><link rel="prefetch" href="/F2022/assets/js/9.5279d356.js">
    <link rel="stylesheet" href="/F2022/assets/css/0.styles.69eb72d8.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/F2022/" class="home-link router-link-active"><img src="/F2022/mad-d-logo-sm.png" alt="MAD9135" class="logo"> <span class="site-name can-hide">MAD9135</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/F2022/overview/" class="nav-link">
  Overview
</a></div><div class="nav-item"><a href="/F2022/deliverables/" class="nav-link">
  Assignments
</a></div><div class="nav-item"><a href="/F2022/resources/" class="nav-link">
  Resources
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/F2022/overview/" class="nav-link">
  Overview
</a></div><div class="nav-item"><a href="/F2022/deliverables/" class="nav-link">
  Assignments
</a></div><div class="nav-item"><a href="/F2022/resources/" class="nav-link">
  Resources
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Introduction</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Firebase Hybrid Content</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/F2022/modules/hybrid/firebase/" aria-current="page" class="sidebar-link">Firebase Introduction</a></li><li><a href="/F2022/modules/hybrid/firebase/firestore/" class="sidebar-link">Firebase Firestore</a></li><li><a href="/F2022/modules/hybrid/firebase/firestore/sample.html" class="sidebar-link">Firestore Starter Project</a></li><li><a href="/F2022/modules/hybrid/firebase/authentication/" aria-current="page" class="active sidebar-link">Firebase Authentication</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/F2022/modules/hybrid/firebase/authentication/#authentication-and-oauth" class="sidebar-link">Authentication and OAuth</a></li><li class="sidebar-sub-header"><a href="/F2022/modules/hybrid/firebase/authentication/#firebase-sdk-authentication" class="sidebar-link">Firebase SDK Authentication</a></li><li class="sidebar-sub-header"><a href="/F2022/modules/hybrid/firebase/authentication/#firebaseui" class="sidebar-link">FirebaseUI</a></li><li class="sidebar-sub-header"><a href="/F2022/modules/hybrid/firebase/authentication/#setup-for-authentication" class="sidebar-link">Setup for Authentication</a></li><li class="sidebar-sub-header"><a href="/F2022/modules/hybrid/firebase/authentication/#username-and-passwords" class="sidebar-link">Username and Passwords</a></li><li class="sidebar-sub-header"><a href="/F2022/modules/hybrid/firebase/authentication/#federated-identity-providers-fip" class="sidebar-link">Federated Identity Providers (FIP)</a></li><li class="sidebar-sub-header"><a href="/F2022/modules/hybrid/firebase/authentication/#remembering-signin-status" class="sidebar-link">Remembering SignIn Status</a></li><li class="sidebar-sub-header"><a href="/F2022/modules/hybrid/firebase/authentication/#hybrid-assignment-2" class="sidebar-link">Hybrid Assignment 2</a></li></ul></li><li><a href="/F2022/modules/hybrid/firebase/permissions/" class="sidebar-link">Firebase Permissions</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>React</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Next JS &amp; React Native</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><header><div class="section-title gold">
    Firebase
  </div> <h1>Firebase Authentication</h1></header> <h2 id="authentication-and-oauth"><a href="#authentication-and-oauth" class="header-anchor">#</a> Authentication and OAuth</h2> <p>Firebase Authentication is a collection of backend services, SDKs, and UI libraries to authenticate users to your app. It supports authentication using passwords, phone numbers, and popular identity providers like Google, Facebook and Twitter, and more.</p> <p>It uses a standard called OAuth <a href="https://auth0.com/" target="_blank" rel="noopener noreferrer">Open Authentication<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> to validate users.</p> <p>The standard is a way for one website to vouch for the identity of a user on another website. Say for an example <code>www.sandwiches.com</code> wants to have validated users on their website but they don't want to have to manage and save and protect all the user details. So, instead, they use the OAuth standard and let another website validate the users for them. <code>www.sandwiches.com</code> can add some code to let <code>Twitter.com</code> validate users on their behalf. When a <code>sandwiches.com</code> user clicks the login button, they are taken to a page controlled by <code>twitter.com</code>. The user enters their <code>twitter.com</code> credentials and submits the form. <code>twitter.com</code> validates the user, and if the login is correct, then <code>twitter.com</code> redirects the user back to <code>sandwiches.com</code> along with a token and some basic user information. Now, <code>sandwiches.com</code> can treat the user as logged in and can use the basic user identifying information.</p> <h2 id="firebase-sdk-authentication"><a href="#firebase-sdk-authentication" class="header-anchor">#</a> Firebase SDK Authentication</h2> <p>The different types of authentication that you can do with the Firebase are:</p> <ul><li><code>Email and password</code>: Firebase stores and validates the email and password combination.</li> <li><code>Federated identity provider</code>: Validate users with Google, Apple, Twitter, Github, or Facebook.</li> <li><code>Phone number</code>: Use SMS to validate users via their phone number.</li> <li><code>Custom auth system integration</code>: Connect your own authentication system through Firebase.</li> <li><code>Anonymous auth</code>: Use features that require authentication without requiring users to sign in first by creating temporary anonymous accounts.</li></ul> <p>On the free account tier for Firebase, for most of the auth types there is a limit of 3000 daily active users. Beyond that you will need to pay for usage of the system.</p> <p>To sign a user into your app, you first get authentication credentials from the user. These credentials can be the user's email address and password, or an OAuth token from a federated identity provider. Then, you pass these credentials to the Firebase Authentication SDK. Our backend services will then verify those credentials and return a response to the client.</p> <p>After a successful sign in, you can access the user's basic profile information, and you can control the user's access to data stored in other Firebase products. You can also use the provided authentication token to verify the identity of users in your own backend services.</p> <h2 id="firebaseui"><a href="#firebaseui" class="header-anchor">#</a> FirebaseUI</h2> <p>There is a library of login interface components that you can import and use in your site.</p> <p><a href="https://firebase.google.com/docs/auth/web/firebaseui" target="_blank" rel="noopener noreferrer">Here is the reference<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> for the web version of FirebaseUI.</p> <p>You won't be using the FirebaseUI library in our site, but we encourage you to explore it on your own.</p> <h2 id="setup-for-authentication"><a href="#setup-for-authentication" class="header-anchor">#</a> Setup for Authentication</h2> <p>To add support for authentication we need to import <code>getAuth</code> from <code>firebase/auth</code>. This is in addition to the <code>initializeApp</code> import for connecting to and configuring Firebase.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> getAuth <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;firebase/auth&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> auth <span class="token operator">=</span> <span class="token function">getAuth</span><span class="token punctuation">(</span>app<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//connect to the auth service after initializing our Firebase app</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>Once you have connected to the general Auth service then there are two different activities that you need to know how to do:</p> <ul><li>create a new user account</li> <li>login an existing user</li></ul> <h2 id="username-and-passwords"><a href="#username-and-passwords" class="header-anchor">#</a> Username and Passwords</h2> <p>If you were going to use the username and password approach to authentication then we need to import the <code>signInWithEmailAndPassword</code> and <code>createUserWithEmailAndPassword</code> and <code>onAuthStateChanged</code> methods.</p> <p>The first two methods should be obvious what they do by the method names. The third one <code>onAuthStateChanged</code> tells us when a user logs in or out. This is our trigger to update the interface plus, how we get the user's details.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> getAuth<span class="token punctuation">,</span> createUserWithEmailAndPassword<span class="token punctuation">,</span> signInWithEmailAndPassword<span class="token punctuation">,</span> onAuthStateChanged <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;firebase/auth&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> auth <span class="token operator">=</span> <span class="token function">getAuth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//pass in your auth object plus the email and password strings</span>
<span class="token function">createUserWithEmailAndPassword</span><span class="token punctuation">(</span>auth<span class="token punctuation">,</span> email<span class="token punctuation">,</span> password<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">userCredential</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// Signed in </span>
    <span class="token keyword">const</span> user <span class="token operator">=</span> userCredential<span class="token punctuation">.</span>user<span class="token punctuation">;</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> errorCode <span class="token operator">=</span> error<span class="token punctuation">.</span>code<span class="token punctuation">;</span>
    <span class="token keyword">const</span> errorMessage <span class="token operator">=</span> error<span class="token punctuation">.</span>message<span class="token punctuation">;</span>
    <span class="token comment">// ..</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//pass in your auth object plus the email and password strings</span>
<span class="token function">signInWithEmailAndPassword</span><span class="token punctuation">(</span>auth<span class="token punctuation">,</span> email<span class="token punctuation">,</span> password<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">userCredential</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// Signed in </span>
    <span class="token keyword">const</span> user <span class="token operator">=</span> userCredential<span class="token punctuation">.</span>user<span class="token punctuation">;</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> errorCode <span class="token operator">=</span> error<span class="token punctuation">.</span>code<span class="token punctuation">;</span>
    <span class="token keyword">const</span> errorMessage <span class="token operator">=</span> error<span class="token punctuation">.</span>message<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//track when the user logs in or out </span>
<span class="token function">onAuthStateChanged</span><span class="token punctuation">(</span>auth<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">user</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>user<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// User is signed in, see docs for a list of available properties</span>
    <span class="token comment">// https://firebase.google.com/docs/reference/js/firebase.User</span>
    <span class="token keyword">const</span> uid <span class="token operator">=</span> user<span class="token punctuation">.</span>uid<span class="token punctuation">;</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token comment">// User is signed out</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br></div></div><p>When you are tracking the user logging in or out with <code>onAuthStateChanged</code> and you get the user object back, there are many properties that you have access to. The few most useful properties in the <code>user</code> object are <code>uid</code>, <code>displayName</code>, <code>email</code> and <code>photoURL</code>.</p> <p>That <code>user</code> object also has a bunch of methods that can be very useful at times. These include <code>delete</code>, <code>getIdToken</code>, <code>reauthenticateWithCredential</code>, <code>updateEmail</code>, <code>updatePassword</code>, <code>updatePhoneNumber</code>, and <code>sendEmailVerification</code>.</p> <p>If you have a website made up of a number of different webpages. You don't want users to have to log in again on every page. So, you can check the <code>currentUser</code> property on the <code>auth</code> object.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> auth <span class="token operator">=</span> <span class="token function">getAuth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//to be used inside a function </span>
<span class="token keyword">const</span> user <span class="token operator">=</span> auth<span class="token punctuation">.</span>currentUser<span class="token punctuation">;</span>
<span class="token keyword">if</span><span class="token punctuation">(</span>user <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token comment">//user is logged in</span>
  <span class="token keyword">const</span> displayName <span class="token operator">=</span> user<span class="token punctuation">.</span>displayName<span class="token punctuation">;</span>
  <span class="token keyword">const</span> email <span class="token operator">=</span> user<span class="token punctuation">.</span>email<span class="token punctuation">;</span>
  <span class="token keyword">const</span> photoURL <span class="token operator">=</span> user<span class="token punctuation">.</span>photoURL<span class="token punctuation">;</span>
  <span class="token keyword">const</span> emailVerified <span class="token operator">=</span> user<span class="token punctuation">.</span>emailVerified<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
  <span class="token comment">//user is not logged in </span>
<span class="token punctuation">}</span>

<span class="token comment">//alternatively </span>
<span class="token comment">// FirebaseAuth.instance (your auth variable created by getAuth() )</span>
<span class="token keyword">const</span> userid <span class="token operator">=</span> auth<span class="token punctuation">.</span>currentUser<span class="token punctuation">.</span>uid<span class="token punctuation">;</span>
<span class="token comment">//will give you the id of a currently logged in user </span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>You can learn <a href="https://firebase.google.com/docs/auth/web/manage-users" target="_blank" rel="noopener noreferrer">more about user management here<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="federated-identity-providers-fip"><a href="#federated-identity-providers-fip" class="header-anchor">#</a> Federated Identity Providers (FIP)</h2> <p>This will be the type of authentication that you will integrate into your <code>Fire-Giftr</code> assignment app. It is the type that lets users validate with Github, Facebook, Google, Apple, and Twitter.</p> <p>It also needs to import the <code>getAuth</code> method in your JavaScript.</p> <p>Now, to support any of these Authentication methods, including the email and password one that is discussed above, you need to go into the <a href="https://console.firebase.google.com/" target="_blank" rel="noopener noreferrer">Firebase Console<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> into the settings for your project. Go to your <code>Project</code> and then to the <code>Authentication</code> section inside the <code>build</code> menu on the left-hand side.</p> <p>You need to choose and activate which Authentication methods you want to use for your project. Start by clicking the <code>Get Started</code> button on the Authentication page.</p> <p>You will see a screen like this:</p> <p><img src="/F2022/assets/img/auth-providers.10535230.png" alt="Auth Provider list screenshot"></p> <p>For your 2nd Hybrid assignment you can use either <code>Github</code> or <code>Twitter</code> as the identity provider for your web app.</p> <p>When you select one of the Federated Providers on the console screen you will see this:</p> <p><img src="/F2022/assets/img/github-select.9068d398.png" alt="Github details screenshot"></p> <p>Each of the providers will require a couple pieces of information, like a Client ID and client secret, or an API key and API secret.</p> <p>Each of the screens that ask for the key and secrets will have a callback URL. You will need to copy this callback URL so you can give it to Github or Twitter when you register your app.</p> <h3 id="register-for-github-keys"><a href="#register-for-github-keys" class="header-anchor">#</a> Register for Github Keys</h3> <p>Use <a href="https://github.com/settings/applications/new" target="_blank" rel="noopener noreferrer">this page<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> to register your App with Github.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> GithubAuthProvider<span class="token punctuation">,</span> getAuth <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;firebase/auth&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> auth <span class="token operator">=</span> <span class="token function">getAuth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
auth<span class="token punctuation">.</span>languageCode <span class="token operator">=</span> <span class="token string">'fr'</span><span class="token punctuation">;</span> <span class="token comment">//set language for login to french</span>

<span class="token keyword">const</span> provider <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GithubAuthProvider</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

provider<span class="token punctuation">.</span><span class="token function">setCustomParameters</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token string-property property">'allow_signup'</span><span class="token operator">:</span> <span class="token string">'true'</span><span class="token punctuation">,</span> <span class="token comment">//let the user signup for a Github account through the interface </span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="register-for-twitter-keys"><a href="#register-for-twitter-keys" class="header-anchor">#</a> Register for Twitter Keys</h3> <p>Use <a href="https://developer.twitter.com/en/apps" target="_blank" rel="noopener noreferrer">this page<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> to register your App with Twitter.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> getAuth<span class="token punctuation">,</span> TwitterAuthProvider <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;firebase/auth&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> auth <span class="token operator">=</span> <span class="token function">getAuth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
auth<span class="token punctuation">.</span>languageCode <span class="token operator">=</span> <span class="token string">'en'</span><span class="token punctuation">;</span> <span class="token comment">//set language for login to english</span>

<span class="token keyword">const</span> provider <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TwitterAuthProvider</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="javascript-for-fip-login-and-registration"><a href="#javascript-for-fip-login-and-registration" class="header-anchor">#</a> JavaScript for FIP Login and Registration</h3> <p>Both the Twitter and Github versions have a method called <code>signInWithPopup</code> that creates a popup window to allow your user to login via Github or Twitter.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> getAuth<span class="token punctuation">,</span> signInWithPopup<span class="token punctuation">,</span> TwitterAuthProvider<span class="token punctuation">,</span> GithubAuthProvider <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;firebase/auth&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> auth <span class="token operator">=</span> <span class="token function">getAuth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//choose one of the following two lines </span>
<span class="token keyword">const</span> provider <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TwitterAuthProvider</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> provider <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GithubAuthProvider</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">attemptLogin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token comment">//try to login with the global auth and provider objects</span>
  <span class="token function">signInWithPopup</span><span class="token punctuation">(</span>auth<span class="token punctuation">,</span> provider<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">//IF YOU USED TWITTER </span>
      <span class="token comment">// This gives you a the Twitter OAuth 1.0 Access Token and Secret.</span>
      <span class="token comment">// You can use these server side with your app's credentials to access the Twitter API.</span>
      <span class="token keyword">const</span> credential <span class="token operator">=</span> TwitterAuthProvider<span class="token punctuation">.</span><span class="token function">credentialFromResult</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> token <span class="token operator">=</span> credential<span class="token punctuation">.</span>accessToken<span class="token punctuation">;</span>
      <span class="token keyword">const</span> secret <span class="token operator">=</span> credential<span class="token punctuation">.</span>secret<span class="token punctuation">;</span>

      <span class="token comment">//IF YOU USED GITHUB PROVIDER </span>
      <span class="token keyword">const</span> credential <span class="token operator">=</span> GithubAuthProvider<span class="token punctuation">.</span><span class="token function">credentialFromResult</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> token <span class="token operator">=</span> credential<span class="token punctuation">.</span>accessToken<span class="token punctuation">;</span>

      <span class="token comment">// The signed-in user info.</span>
      <span class="token keyword">const</span> user <span class="token operator">=</span> result<span class="token punctuation">.</span>user<span class="token punctuation">;</span>
      <span class="token comment">// ...</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// Handle Errors here.</span>
      <span class="token keyword">const</span> errorCode <span class="token operator">=</span> error<span class="token punctuation">.</span>code<span class="token punctuation">;</span>
      <span class="token keyword">const</span> errorMessage <span class="token operator">=</span> error<span class="token punctuation">.</span>message<span class="token punctuation">;</span>
      <span class="token comment">// The email of the user's account used.</span>
      <span class="token keyword">const</span> email <span class="token operator">=</span> error<span class="token punctuation">.</span>customData<span class="token punctuation">.</span>email<span class="token punctuation">;</span>
      <span class="token comment">// The AuthCredential type that was used.</span>
      <span class="token keyword">const</span> credential <span class="token operator">=</span> TwitterAuthProvider<span class="token punctuation">.</span><span class="token function">credentialFromError</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">//OR</span>
      <span class="token keyword">const</span> credential <span class="token operator">=</span> GithubAuthProvider<span class="token punctuation">.</span><span class="token function">credentialFromError</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br></div></div><p>When testing this on localhost, you will see this warning in the console.</p> <blockquote><p>Info: The current domain is not authorized for OAuth operations. This will prevent signInWithPopup, signInWithRedirect, linkWithPopup and linkWithRedirect from working. Add your domain (127.0.0.1) to the OAuth redirect domains list in the Firebase console -&gt; Auth section -&gt; Sign in method tab.</p></blockquote> <p>The screen where you will add <code>127.0.0.1</code> looks like the image below. It will have <code>localhost</code> in the list already. However, the VSCode extension Live Server uses <code>127.0.0.1</code>.</p> <p><img src="/F2022/assets/img/domain-list.4e951b54.png" alt="Auth domain list"></p> <p>Once the domain list has been updated then clicking your sign in anchor should call a function that calls on the Firebase <code>signInWithPopup</code> method, which needs to be imported.</p> <p>Calling the <code>signinWithPopup</code> method should show you a pop up like this:</p> <p><img src="/F2022/assets/img/auth-popup.278adf24.png" alt="Github auth popup"></p> <p>By this point we should be able to have a user sign in or sign out.</p> <h2 id="remembering-signin-status"><a href="#remembering-signin-status" class="header-anchor">#</a> Remembering SignIn Status</h2> <p>So, what do we do if a user navigates to a new page or refreshes the current page? How to do hang on to the user information?</p> <p>Whenever there is a successful login method called, a credential object is provided. This credential object has a property called <code>accessToken</code>. We can use <code>sessionStorage</code> to save this <code>accessToken</code>.</p> <p>Now, any time the page loads we can check <code>sessionStorage</code> for the token. If the token exists then we can call the imported method <code>signInWithCredential</code>. It takes a reference to the <code>auth</code> object plus a credential object and returns a Promise that will resolve. The credential that <code>signInWithCredential</code> needs will be generated by <code>GithubAuthProvider.credential(token)</code> that accepts your token from <code>sessionStorage</code>.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">validateWithToken</span><span class="token punctuation">(</span><span class="token parameter">token</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">const</span> credential <span class="token operator">=</span> GithubAuthProvider<span class="token punctuation">.</span><span class="token function">credential</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">signInWithCredential</span><span class="token punctuation">(</span>auth<span class="token punctuation">,</span> credential<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">//the token and credential were still valid </span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// Handle Errors here.</span>
      <span class="token keyword">const</span> errorCode <span class="token operator">=</span> error<span class="token punctuation">.</span>code<span class="token punctuation">;</span>
      <span class="token keyword">const</span> errorMessage <span class="token operator">=</span> error<span class="token punctuation">.</span>message<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>So, we have two methods <code>signInWithPopup(auth, provider)</code> which uses a popup window to validate with Github (or whoever your FIP provider is), and <code>signInWithCredential(auth, credential)</code> which re-validates a user based on a token.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> provider <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GithubAuthProvider</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">signInWithPopup</span><span class="token punctuation">(</span>auth<span class="token punctuation">,</span> provider<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> credential <span class="token operator">=</span> GithubAuthProvider<span class="token punctuation">.</span><span class="token function">credential</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">signInWithCredential</span><span class="token punctuation">(</span>auth<span class="token punctuation">,</span> credential<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>The <code>signInWithPopup</code> takes longer and is meant to be used once per session. The <code>signInWithCredential</code> method is designed to be called multiple times during a session, and does not use a pop up.</p> <p>An alternative to writing the few lines of sessionStorage code yourself is to use the built-in methods <code>setPersistence</code> from <code>firebase/auth</code>. It takes one of three values for how you want to handle the saving of the credentials.</p> <ul><li><code>firebase.auth.Auth.Persistence.SESSION</code> save credentials in sessionStorage</li> <li><code>firebase.auth.Auth.Persistence.LOCAL</code> save in memory like a variable</li> <li><code>firebase.auth.Auth.Persistence.NONE</code> do not save credentials</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>getAuth<span class="token punctuation">,</span> setPersistence<span class="token punctuation">,</span> browserSessionPersistence<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'firebase/auth'</span><span class="token punctuation">;</span>

<span class="token comment">//import browserSessionPersistence: it is the same value as firebase.auth.Auth.Persistence.SESSION </span>

<span class="token keyword">const</span> auth <span class="token operator">=</span> <span class="token function">getAuth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">setPersistence</span><span class="token punctuation">(</span>auth<span class="token punctuation">,</span> browserSessionPersistence<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// Existing and future Auth states are now persisted in the current</span>
    <span class="token comment">// session only. Closing the window would clear any existing state even</span>
    <span class="token comment">// if a user forgets to sign out.</span>
    <span class="token keyword">const</span> provider <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GithubAuthProvider</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// ...</span>
    <span class="token comment">// New sign-in will be persisted with session persistence.</span>
    <span class="token function">signInWithPopup</span><span class="token punctuation">(</span>auth<span class="token punctuation">,</span> provider<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">user</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
      
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>

    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
    <span class="token comment">//return the call to your desired login method</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// Handle Errors here.</span>
    <span class="token keyword">const</span> errorCode <span class="token operator">=</span> error<span class="token punctuation">.</span>code<span class="token punctuation">;</span>
    <span class="token keyword">const</span> errorMessage <span class="token operator">=</span> error<span class="token punctuation">.</span>message<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><p>For more information you can read the <a href="https://firebase.google.com/docs/auth/web/auth-state-persistence" target="_blank" rel="noopener noreferrer">auth-state-persistence reference<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="refactoring"><a href="#refactoring" class="header-anchor">#</a> Refactoring</h3> <p>So, when writing your app, keep in mind the sequence of your methods and think about the different ways that a page can be loaded. With each of the sign in methods you will likely need to do things like:</p> <ul><li>hide the sign in button.</li> <li>show the sign out button.</li> <li>load the list of people.</li> <li>select a person and load the list of ideas for that person.</li></ul> <p>You will likely end up with a lot of duplicate code. You should refactor this into one or two functions that can be called from multiple places.</p> <div class="custom-block tip"><p class="custom-block-title">REFACTORING</p> <p>After you get all your authentication working, always go back through your code looking for duplicated lines.
The more you can reduce the duplication and create common methods for achieving these repeated tasks, the easier it becomes to debug your code.</p></div> <h2 id="hybrid-assignment-2"><a href="#hybrid-assignment-2" class="header-anchor">#</a> Hybrid Assignment 2</h2> <p>For a full description of the assignment and requirements, see the Assignment page in BS LMS.</p> <p>Basically, your assignment is to take the finished version of the first hybrid assignment and add the ability for a user to sign in and sign out. The page should use <code>sessionStorage</code> to test if a user has a currently valid authentication token.</p> <p>No data about <code>people</code> or <code>gift-ideas</code> should appear on the screen if the user is not currently signed in.</p> <div class="custom-block danger"><p class="custom-block-title">Limitations of Assignment 2</p> <p>The biggest limitation of this version is that while multiple different users can sign in to use the website, they are all sharing the same data set.</p></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">9/6/2022, 8:03:45 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      
      <a href="/F2022/modules/hybrid/firebase/firestore/sample.html" class="prev">
        Firestore Starter Project
      </a></span> <span class="next"><a href="/F2022/modules/hybrid/firebase/permissions/">
        Firebase Permissions
      </a>
      
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/F2022/assets/js/app.e8c285b9.js" defer></script><script src="/F2022/assets/js/2.9a13455f.js" defer></script><script src="/F2022/assets/js/3.4ca6bd9c.js" defer></script><script src="/F2022/assets/js/6.351fee7d.js" defer></script>
  </body>
</html>
